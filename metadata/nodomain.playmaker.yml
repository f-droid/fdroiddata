Categories:
  - Games
License: CC0-1.0
AuthorName: Mystic Jungle
AuthorWebSite: https://mystic-jungle.itch.io/
WebSite: https://mystic-jungle.itch.io/play-maker
SourceCode: https://codeberg.org/MysticJungle/play-maker
IssueTracker: https://codeberg.org/MysticJungle/play-maker/issues

RepoType: git
Repo: https://codeberg.org/MysticJungle/play-maker

Builds:
  - versionName: 1.3.1
    versionCode: 5
    commit: v1.3.1
    sudo:
      - apt-get update
      - apt-get install -y build-essential scons pkg-config libx11-dev libxcursor-dev
        libxinerama-dev libgl1-mesa-dev libglu1-mesa-dev libasound2-dev libpulse-dev
        libudev-dev libxi-dev libxrandr-dev libwayland-dev
    output: bin/playmaker.apk
    srclibs:
      - Godot@4.4.1-stable
    prebuild:
      - mkdir -p bin
      - mkdir -p android
      - mkdir -p ~/.local/share/godot/export_templates/4.4.1.stable/
    build:
      - export ANDROID_SDK_ROOT=$$SDK$$
      - export ANDROID_NDK_ROOT=$$NDK$$
      - export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64
      - pushd $$Godot$$
      - scons -j `nproc` platform=linuxbsd target=editor
      - scons -j `nproc` platform=android target=template_release arch=arm64
      - cd platform/android/java
      - gradle generateGodotTemplates
      - popd
      - cp $$Godot$$/bin/android_release.apk ~/.local/share/godot/export_templates/4.4.1.stable/
      - $$Godot$$/bin/godot.linuxbsd.editor.x86_64 --headless --export-release 'Android
        Unsigned' bin/playmaker.apk
    ndk: 23.2.8568313

AutoUpdateMode: Version
UpdateCheckMode: Tags
UpdateCheckData: project.godot|config_version=(\d+)|.|config/version="(.+)"
CurrentVersion: 1.3.1
CurrentVersionCode: 5
