AntiFeatures:
  - NonFreeAdd
  - Tracking
Provides: org.mozilla.firefox
Categories:
  - Internet
License: MPL-2.0
WebSite: https://wiki.mozilla.org/Mobile/Platforms/Android#System_Requirements
SourceCode: http://hg.mozilla.org
IssueTracker: https://bugzilla.mozilla.org
Changelog: https://www.mozilla.org/en-US/firefox/android/notes/
Donate: https://sendto.mozilla.org/page/contribute/openwebfund

Name: Fennec F-Droid
Description: |-
    Browser using the Gecko layout engine to render web pages, which implements
    current and anticipated web standards.

    Fennec F-Droid is based on the latest Firefox release. It's focused on removing
    any proprietary bits found in official Mozilla's builds. There might still be
    some binaries left and the app (or some builds) might get removed or re-pushed
    anytime.

RepoType: hg
Repo: https://hg.mozilla.org/releases/mozilla-release/

Builds:
  - versionName: '35.0'
    versionCode: 350000
    commit: FENNEC_35_0_RELEASE
    init:
      - rm -R docshell/test/
      - rm -R dom/tests/
      - rm -R modules/libjar/test/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm toolkit/crashreporter/moz.build
      - rm -R toolkit/crashreporter/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R xpcom/tests/
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@214c475d
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' -e 's/@ANDROID_VERSION_CODE@/350000/g'
        mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-21\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_DEVICES/d' -e '/MOZ_NATIVE_DEVICES/d' mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\n'
        >> mobile/android/confvars.sh
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '35.0'
    versionCode: 350010
    commit: FENNEC_35_0_RELEASE
    init:
      - rm -R docshell/test/
      - rm -R dom/tests/
      - rm -R modules/libjar/test/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm toolkit/crashreporter/moz.build
      - rm -R toolkit/crashreporter/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R xpcom/tests/
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@214c475d
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' -e 's/@ANDROID_VERSION_CODE@/350010/g'
        mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-21\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=i386-linux-android" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_DEVICES/d' -e '/MOZ_NATIVE_DEVICES/d' mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\n'
        >> mobile/android/confvars.sh
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '36.0'
    versionCode: 360000
    commit: FENNEC_36_0_RELEASE
    init:
      - rm -R docshell/test/
      - rm -R dom/tests/
      - rm -R modules/libjar/test/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm toolkit/crashreporter/moz.build
      - rm -R toolkit/crashreporter/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R xpcom/tests/
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@11c8e4b7b332e466f72df2fb7a340ec8143b1135
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' -e 's/@ANDROID_VERSION_CODE@/360000/g'
        mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-21\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - echo "==HOTFIX=="
      - patch -p1 <$$MozLocales$$/Bug1083116.patch
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '36.0'
    versionCode: 360010
    commit: FENNEC_36_0_RELEASE
    init:
      - rm -R docshell/test/
      - rm -R dom/tests/
      - rm -R modules/libjar/test/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm toolkit/crashreporter/moz.build
      - rm -R toolkit/crashreporter/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R xpcom/tests/
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@11c8e4b7b332e466f72df2fb7a340ec8143b1135
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' -e 's/@ANDROID_VERSION_CODE@/360010/g'
        mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-21\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=i386-linux-android" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - echo "==HOTFIX=="
      - patch -p1 <$$MozLocales$$/Bug1083116.patch
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 36.0.1
    versionCode: 360100
    commit: FENNEC_36_0_1_RELEASE
    init:
      - rm -R docshell/test/
      - rm -R dom/tests/
      - rm -R modules/libjar/test/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm toolkit/crashreporter/moz.build
      - rm -R toolkit/crashreporter/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R xpcom/tests/
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@11c8e4b7b332e466f72df2fb7a340ec8143b1135
    prebuild:
      - mkdir fdroid
      - vercode=360100
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-21\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - echo "==HOTFIX=="
      - patch -p1 <$$MozLocales$$/Bug1083116.patch
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 36.0.1
    versionCode: 360110
    commit: FENNEC_36_0_1_RELEASE
    init:
      - rm -R docshell/test/
      - rm -R dom/tests/
      - rm -R modules/libjar/test/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm toolkit/crashreporter/moz.build
      - rm -R toolkit/crashreporter/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R xpcom/tests/
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@11c8e4b7b332e466f72df2fb7a340ec8143b1135
    prebuild:
      - mkdir fdroid
      - vercode=360110
      - fxarch=i386-linux-android
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-21\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - echo "==HOTFIX=="
      - patch -p1 <$$MozLocales$$/Bug1083116.patch
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 36.0.4
    versionCode: 360400
    commit: FENNEC_36_0_4_RELEASE
    init: rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
    patch:
      - 36.0.4-android-22-a.patch
      - 36.0.4-android-22-b.patch
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@11c8e4b7b332e466f72df2fb7a340ec8143b1135
    prebuild:
      - mkdir fdroid
      - vercode=360400
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - echo "==HOTFIX=="
      - patch -p1 <$$MozLocales$$/Bug1083116.patch
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 36.0.4
    versionCode: 360410
    commit: FENNEC_36_0_4_RELEASE
    init: rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
    patch:
      - 36.0.4-android-22-a.patch
      - 36.0.4-android-22-b.patch
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@11c8e4b7b332e466f72df2fb7a340ec8143b1135
    prebuild:
      - mkdir fdroid
      - vercode=360410
      - fxarch=i386-linux-android
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - echo "==HOTFIX=="
      - patch -p1 <$$MozLocales$$/Bug1083116.patch
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '37.0'
    versionCode: 370000
    commit: FENNEC_37_0_RELEASE
    init: rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
    patch:
      - 36.0.4-android-22-a.patch
      - 36.0.4-android-22-b.patch
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - vercode=370000
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '37.0'
    versionCode: 370010
    commit: FENNEC_37_0_RELEASE
    init: rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
    patch:
      - 36.0.4-android-22-a.patch
      - 36.0.4-android-22-b.patch
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - vercode=370010
      - fxarch=i386-linux-android
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 37.0.1
    versionCode: 370100
    commit: FENNEC_37_0_1_RELEASE
    init: rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
    patch:
      - 36.0.4-android-22-a.patch
      - 36.0.4-android-22-b.patch
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - vercode=370100
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 37.0.1
    versionCode: 370110
    commit: FENNEC_37_0_1_RELEASE
    init: rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
    patch:
      - 36.0.4-android-22-a.patch
      - 36.0.4-android-22-b.patch
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - vercode=370110
      - fxarch=i386-linux-android
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORT=0\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 37.0.2
    versionCode: 370200
    commit: FENNEC_37_0_2_RELEASE
    init: rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
    patch:
      - 36.0.4-android-22-a.patch
      - 36.0.4-android-22-b.patch
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - vercode=370200
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORTER=0\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 37.0.2
    versionCode: 370210
    commit: FENNEC_37_0_2_RELEASE
    init: rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
    patch:
      - 36.0.4-android-22-a.patch
      - 36.0.4-android-22-b.patch
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - vercode=370210
      - fxarch=i386-linux-android
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=${vercode}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - echo -e 'MOZ_DEVICES=0\nMOZ_NATIVE_DEVICES=0\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=0\nMOZ_SERVICES_HEALTHREPORTER=0\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - sed -i -e '/MOZ_WIDGET_TOOLKIT/,+2d' build/stlport/moz.build
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '38.0'
    versionCode: 380000
    commit: FENNEC_38_0_RELEASE
    init:
      - rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORT/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '38.0'
    versionCode: 380010
    commit: FENNEC_38_0_RELEASE
    init:
      - rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - fxarch=i386-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORT/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 38.0.1
    versionCode: 380100
    commit: FENNEC_38_0_1_RELEASE
    init:
      - rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORT/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 38.0.1
    versionCode: 380110
    commit: FENNEC_38_0_1_RELEASE
    init:
      - rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - fxarch=i386-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORT/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 38.0.5
    versionCode: 380500
    commit: FENNEC_38_0_5_RELEASE
    init:
      - rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORT/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 38.0.5
    versionCode: 380510
    commit: FENNEC_38_0_5_RELEASE
    init:
      - rm -R docshell/test/ dom/tests/ modules/libjar/test/ security/manager/ssl/tests/*test/
        security/nss/cmd/bltest/tests/ security/nss/tests/ toolkit/crashreporter/moz.build
        toolkit/crashreporter/client/ toolkit/crashreporter/google-breakpad/src/tools/
        toolkit/crashreporter/google-breakpad/src/client/ toolkit/crashreporter/google-breakpad/src/processor/testdata/
        toolkit/crashreporter/google-breakpad/src/third_party/linux/ toolkit/mozapps/extensions/test/
        xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@a7219763
    prebuild:
      - mkdir fdroid
      - fxarch=i386-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec FDroid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORT/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '39.0'
    versionCode: 390000
    commit: FENNEC_39_0_RELEASE
    init:
      - find toolkit/crashreporter/ -mindepth 1 -maxdepth 1 ! -name "crashreporter.mozbuild"
        ! -name "google-breakpad" -exec rm -R '{}' \;
      - find toolkit/crashreporter/google-breakpad/ -mindepth 1 -maxdepth 1 ! -name
        "src" -exec rm -R '{}' \;
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - find dom/html/test/ -type f -exec rm '{}' \;
      - rm -R accessible/tests/
      - rm -R addon-sdk/source/test/
      - rm -R browser/devtools/debugger/test/
      - rm -R browser/devtools/webide/test/
      - rm -R build/mobile/robocop/
      - rm -R build/mobile/sutagent/
      - rm -R chrome/test/
      - rm -R content/
      - rm -R docshell/test/
      - rm -R dom/apps/tests/
      - rm -R dom/base/crashtests/
      - rm -R dom/base/test/
      - rm -R dom/html/test/
      - rm -R dom/indexedDB/test/
      - rm -R dom/tests/
      - rm -R layout/base/crashtests/
      - rm -R layout/generic/crashtests/
      - rm -R layout/generic/test/
      - rm -R layout/reftests/
      - rm -R mobile/android/base/tests/
      - rm -R mobile/android/build/classycle/
      - rm -R modules/libmar/tests/
      - rm -R modules/libjar/test/
      - rm -R modules/libjar/zipwriter/test/
      - rm -R mozglue/linker/tests/
      - rm -R security/manager/ssl/tests/compiled/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm -R services/sync/tests/
      - rm -R testing/crashtest/
      - rm -R testing/mozbase/mozinstall/tests/
      - rm -R testing/mozbase/mozprofile/tests/
      - rm -R testing/web-platform/
      - rm -R toolkit/devtools/apps/tests/
      - rm -R toolkit/components/search/tests/
      - rm -R toolkit/modules/tests/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R toolkit/mozapps/update/tests/
      - rm -R toolkit/webapps/tests/
      - rm -R widget/crashtests/
      - rm -R xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/TESTS_MANIFESTS/,+19d' docshell/moz.build
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@06bd272337dc1ffe7255982e4f7643b6bfcfd774
    prebuild:
      - mkdir fdroid
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORTER/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
      - echo "==HEALTHREPORTER=="
      - sed -i -e '/datareporting.healthreport.uploadEnabled/s/true/false/g' -e '/datareporting.healthreport.service.enabled/s/true/false/g'
        ./services/healthreport/healthreport-prefs.js
      - sed -i -e '/android.not_a_preference.healthreport.uploadEnabled/,+3s/android:defaultValue="true"/android:defaultValue="false"/g'
        mobile/android/base/resources/xml/preferences_vendor.xml
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '39.0'
    versionCode: 390010
    commit: FENNEC_39_0_RELEASE
    init:
      - find toolkit/crashreporter/ -mindepth 1 -maxdepth 1 ! -name "crashreporter.mozbuild"
        ! -name "google-breakpad" -exec rm -R '{}' \;
      - find toolkit/crashreporter/google-breakpad/ -mindepth 1 -maxdepth 1 ! -name
        "src" -exec rm -R '{}' \;
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - find dom/html/test/ -type f -exec rm '{}' \;
      - rm -R accessible/tests/
      - rm -R addon-sdk/source/test/
      - rm -R browser/devtools/debugger/test/
      - rm -R browser/devtools/webide/test/
      - rm -R build/mobile/robocop/
      - rm -R build/mobile/sutagent/
      - rm -R chrome/test/
      - rm -R content/
      - rm -R docshell/test/
      - rm -R dom/apps/tests/
      - rm -R dom/base/crashtests/
      - rm -R dom/base/test/
      - rm -R dom/html/test/
      - rm -R dom/indexedDB/test/
      - rm -R dom/tests/
      - rm -R layout/base/crashtests/
      - rm -R layout/generic/crashtests/
      - rm -R layout/generic/test/
      - rm -R layout/reftests/
      - rm -R mobile/android/base/tests/
      - rm -R mobile/android/build/classycle/
      - rm -R modules/libmar/tests/
      - rm -R modules/libjar/test/
      - rm -R modules/libjar/zipwriter/test/
      - rm -R mozglue/linker/tests/
      - rm -R security/manager/ssl/tests/compiled/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm -R services/sync/tests/
      - rm -R testing/crashtest/
      - rm -R testing/mozbase/mozinstall/tests/
      - rm -R testing/mozbase/mozprofile/tests/
      - rm -R testing/web-platform/
      - rm -R toolkit/devtools/apps/tests/
      - rm -R toolkit/components/search/tests/
      - rm -R toolkit/modules/tests/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R toolkit/mozapps/update/tests/
      - rm -R toolkit/webapps/tests/
      - rm -R widget/crashtests/
      - rm -R xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/TESTS_MANIFESTS/,+19d' docshell/moz.build
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@06bd272337dc1ffe7255982e4f7643b6bfcfd774
    prebuild:
      - mkdir fdroid
      - fxarch=i386-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORTER/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
      - echo "==HEALTHREPORTER=="
      - sed -i -e '/datareporting.healthreport.uploadEnabled/s/true/false/g' -e '/datareporting.healthreport.service.enabled/s/true/false/g'
        ./services/healthreport/healthreport-prefs.js
      - sed -i -e '/android.not_a_preference.healthreport.uploadEnabled/,+3s/android:defaultValue="true"/android:defaultValue="false"/g'
        mobile/android/base/resources/xml/preferences_vendor.xml
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 39.0.1
    versionCode: 390100
    commit: FENNEC_39_0_1_RELEASE
    init:
      - find toolkit/crashreporter/ -mindepth 1 -maxdepth 1 ! -name "crashreporter.mozbuild"
        ! -name "google-breakpad" -exec rm -R '{}' \;
      - find toolkit/crashreporter/google-breakpad/ -mindepth 1 -maxdepth 1 ! -name
        "src" -exec rm -R '{}' \;
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - find dom/html/test/ -type f -exec rm '{}' \;
      - rm -R accessible/tests/
      - rm -R addon-sdk/source/test/
      - rm -R browser/devtools/debugger/test/
      - rm -R browser/devtools/webide/test/
      - rm -R build/mobile/robocop/
      - rm -R build/mobile/sutagent/
      - rm -R chrome/test/
      - rm -R content/
      - rm -R docshell/test/
      - rm -R dom/apps/tests/
      - rm -R dom/base/crashtests/
      - rm -R dom/base/test/
      - rm -R dom/html/test/
      - rm -R dom/indexedDB/test/
      - rm -R dom/tests/
      - rm -R layout/base/crashtests/
      - rm -R layout/generic/crashtests/
      - rm -R layout/generic/test/
      - rm -R layout/reftests/
      - rm -R mobile/android/base/tests/
      - rm -R mobile/android/build/classycle/
      - rm -R modules/libmar/tests/
      - rm -R modules/libjar/test/
      - rm -R modules/libjar/zipwriter/test/
      - rm -R mozglue/linker/tests/
      - rm -R security/manager/ssl/tests/compiled/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm -R services/sync/tests/
      - rm -R testing/crashtest/
      - rm -R testing/mozbase/mozinstall/tests/
      - rm -R testing/mozbase/mozprofile/tests/
      - rm -R testing/web-platform/
      - rm -R toolkit/devtools/apps/tests/
      - rm -R toolkit/components/search/tests/
      - rm -R toolkit/modules/tests/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R toolkit/mozapps/update/tests/
      - rm -R toolkit/webapps/tests/
      - rm -R widget/crashtests/
      - rm -R xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/TESTS_MANIFESTS/,+19d' docshell/moz.build
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@06bd272337dc1ffe7255982e4f7643b6bfcfd774
    prebuild:
      - mkdir fdroid
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORTER/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
      - echo "==HEALTHREPORTER=="
      - sed -i -e '/datareporting.healthreport.uploadEnabled/s/true/false/g' -e '/datareporting.healthreport.service.enabled/s/true/false/g'
        ./services/healthreport/healthreport-prefs.js
      - sed -i -e '/android.not_a_preference.healthreport.uploadEnabled/,+3s/android:defaultValue="true"/android:defaultValue="false"/g'
        mobile/android/base/resources/xml/preferences_vendor.xml
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 39.0.1
    versionCode: 390110
    commit: FENNEC_39_0_1_RELEASE
    init:
      - find toolkit/crashreporter/ -mindepth 1 -maxdepth 1 ! -name "crashreporter.mozbuild"
        ! -name "google-breakpad" -exec rm -R '{}' \;
      - find toolkit/crashreporter/google-breakpad/ -mindepth 1 -maxdepth 1 ! -name
        "src" -exec rm -R '{}' \;
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - find dom/html/test/ -type f -exec rm '{}' \;
      - rm -R accessible/tests/
      - rm -R addon-sdk/source/test/
      - rm -R browser/devtools/debugger/test/
      - rm -R browser/devtools/webide/test/
      - rm -R build/mobile/robocop/
      - rm -R build/mobile/sutagent/
      - rm -R chrome/test/
      - rm -R content/
      - rm -R docshell/test/
      - rm -R dom/apps/tests/
      - rm -R dom/base/crashtests/
      - rm -R dom/base/test/
      - rm -R dom/html/test/
      - rm -R dom/indexedDB/test/
      - rm -R dom/tests/
      - rm -R layout/base/crashtests/
      - rm -R layout/generic/crashtests/
      - rm -R layout/generic/test/
      - rm -R layout/reftests/
      - rm -R mobile/android/base/tests/
      - rm -R mobile/android/build/classycle/
      - rm -R modules/libmar/tests/
      - rm -R modules/libjar/test/
      - rm -R modules/libjar/zipwriter/test/
      - rm -R mozglue/linker/tests/
      - rm -R security/manager/ssl/tests/compiled/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm -R services/sync/tests/
      - rm -R testing/crashtest/
      - rm -R testing/mozbase/mozinstall/tests/
      - rm -R testing/mozbase/mozprofile/tests/
      - rm -R testing/web-platform/
      - rm -R toolkit/devtools/apps/tests/
      - rm -R toolkit/components/search/tests/
      - rm -R toolkit/modules/tests/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R toolkit/mozapps/update/tests/
      - rm -R toolkit/webapps/tests/
      - rm -R widget/crashtests/
      - rm -R xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/TESTS_MANIFESTS/,+19d' docshell/moz.build
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@06bd272337dc1ffe7255982e4f7643b6bfcfd774
    prebuild:
      - mkdir fdroid
      - fxarch=i386-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORTER/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
      - echo "==HEALTHREPORTER=="
      - sed -i -e '/datareporting.healthreport.uploadEnabled/s/true/false/g' -e '/datareporting.healthreport.service.enabled/s/true/false/g'
        ./services/healthreport/healthreport-prefs.js
      - sed -i -e '/android.not_a_preference.healthreport.uploadEnabled/,+3s/android:defaultValue="true"/android:defaultValue="false"/g'
        mobile/android/base/resources/xml/preferences_vendor.xml
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 39.0.2
    versionCode: 390200
    commit: FENNEC_39_0_2_RELEASE
    init:
      - find toolkit/crashreporter/ -mindepth 1 -maxdepth 1 ! -name "crashreporter.mozbuild"
        ! -name "google-breakpad" -exec rm -R '{}' \;
      - find toolkit/crashreporter/google-breakpad/ -mindepth 1 -maxdepth 1 ! -name
        "src" -exec rm -R '{}' \;
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - find dom/html/test/ -type f -exec rm '{}' \;
      - rm -R accessible/tests/
      - rm -R addon-sdk/source/test/
      - rm -R browser/devtools/debugger/test/
      - rm -R browser/devtools/webide/test/
      - rm -R build/mobile/robocop/
      - rm -R build/mobile/sutagent/
      - rm -R chrome/test/
      - rm -R content/
      - rm -R docshell/test/
      - rm -R dom/apps/tests/
      - rm -R dom/base/crashtests/
      - rm -R dom/base/test/
      - rm -R dom/html/test/
      - rm -R dom/indexedDB/test/
      - rm -R dom/tests/
      - rm -R layout/base/crashtests/
      - rm -R layout/generic/crashtests/
      - rm -R layout/generic/test/
      - rm -R layout/reftests/
      - rm -R mobile/android/base/tests/
      - rm -R mobile/android/build/classycle/
      - rm -R modules/libmar/tests/
      - rm -R modules/libjar/test/
      - rm -R modules/libjar/zipwriter/test/
      - rm -R mozglue/linker/tests/
      - rm -R security/manager/ssl/tests/compiled/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm -R services/sync/tests/
      - rm -R testing/crashtest/
      - rm -R testing/mozbase/mozinstall/tests/
      - rm -R testing/mozbase/mozprofile/tests/
      - rm -R testing/web-platform/
      - rm -R toolkit/devtools/apps/tests/
      - rm -R toolkit/components/search/tests/
      - rm -R toolkit/modules/tests/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R toolkit/mozapps/update/tests/
      - rm -R toolkit/webapps/tests/
      - rm -R widget/crashtests/
      - rm -R xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/TESTS_MANIFESTS/,+19d' docshell/moz.build
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@06bd272337dc1ffe7255982e4f7643b6bfcfd774
    prebuild:
      - mkdir fdroid
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's|about:feedback|https://gitlab.com/fdroid/fdroiddata/issues|g'
        mobile/android/base/resources/xml/preferences_vendor.xml
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORTER/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
      - echo "==HEALTHREPORTER=="
      - sed -i -e '/datareporting.healthreport.uploadEnabled/s/true/false/g' -e '/datareporting.healthreport.service.enabled/s/true/false/g'
        ./services/healthreport/healthreport-prefs.js
      - sed -i -e '/android.not_a_preference.healthreport.uploadEnabled/,+3s/android:defaultValue="true"/android:defaultValue="false"/g'
        mobile/android/base/resources/xml/preferences_vendor.xml
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 39.0.2
    versionCode: 390210
    commit: FENNEC_39_0_2_RELEASE
    init:
      - find toolkit/crashreporter/ -mindepth 1 -maxdepth 1 ! -name "crashreporter.mozbuild"
        ! -name "google-breakpad" -exec rm -R '{}' \;
      - find toolkit/crashreporter/google-breakpad/ -mindepth 1 -maxdepth 1 ! -name
        "src" -exec rm -R '{}' \;
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - find dom/html/test/ -type f -exec rm '{}' \;
      - rm -R accessible/tests/
      - rm -R addon-sdk/source/test/
      - rm -R browser/devtools/debugger/test/
      - rm -R browser/devtools/webide/test/
      - rm -R build/mobile/robocop/
      - rm -R build/mobile/sutagent/
      - rm -R chrome/test/
      - rm -R content/
      - rm -R docshell/test/
      - rm -R dom/apps/tests/
      - rm -R dom/base/crashtests/
      - rm -R dom/base/test/
      - rm -R dom/html/test/
      - rm -R dom/indexedDB/test/
      - rm -R dom/tests/
      - rm -R layout/base/crashtests/
      - rm -R layout/generic/crashtests/
      - rm -R layout/generic/test/
      - rm -R layout/reftests/
      - rm -R mobile/android/base/tests/
      - rm -R mobile/android/build/classycle/
      - rm -R modules/libmar/tests/
      - rm -R modules/libjar/test/
      - rm -R modules/libjar/zipwriter/test/
      - rm -R mozglue/linker/tests/
      - rm -R security/manager/ssl/tests/compiled/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm -R services/sync/tests/
      - rm -R testing/crashtest/
      - rm -R testing/mozbase/mozinstall/tests/
      - rm -R testing/mozbase/mozprofile/tests/
      - rm -R testing/web-platform/
      - rm -R toolkit/devtools/apps/tests/
      - rm -R toolkit/components/search/tests/
      - rm -R toolkit/modules/tests/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R toolkit/mozapps/update/tests/
      - rm -R toolkit/webapps/tests/
      - rm -R widget/crashtests/
      - rm -R xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/TESTS_MANIFESTS/,+19d' docshell/moz.build
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@06bd272337dc1ffe7255982e4f7643b6bfcfd774
    prebuild:
      - mkdir fdroid
      - fxarch=i386-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's|about:feedback|https://gitlab.com/fdroid/fdroiddata/issues|g'
        mobile/android/base/resources/xml/preferences_vendor.xml
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORTER/d' -e '/MOZ_DEVICES/d' -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d'
        mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_ANDROID_GOOGLE_PLAY_SERVICES=\nMOZ_SERVICES_HEALTHREPORTER=\n'
        >> mobile/android/confvars.sh
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
      - echo "==HEALTHREPORTER=="
      - sed -i -e '/datareporting.healthreport.uploadEnabled/s/true/false/g' -e '/datareporting.healthreport.service.enabled/s/true/false/g'
        ./services/healthreport/healthreport-prefs.js
      - sed -i -e '/android.not_a_preference.healthreport.uploadEnabled/,+3s/android:defaultValue="true"/android:defaultValue="false"/g'
        mobile/android/base/resources/xml/preferences_vendor.xml
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '40.0'
    versionCode: 400000
    commit: FENNEC_40_0_RELEASE
    init:
      - find toolkit/crashreporter/ -mindepth 1 -maxdepth 1 ! -name "crashreporter.mozbuild"
        ! -name "google-breakpad" -exec rm -R '{}' \;
      - find toolkit/crashreporter/google-breakpad/ -mindepth 1 -maxdepth 1 ! -name
        "src" -exec rm -R '{}' \;
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - find dom/html/test/ -type f -exec rm '{}' \;
      - rm -R accessible/tests/
      - rm -R addon-sdk/source/test/
      - rm -R browser/devtools/debugger/test/
      - rm -R browser/devtools/webide/test/
      - rm -R build/mobile/robocop/
      - rm -R build/mobile/sutagent/
      - rm -R chrome/test/
      - rm -R content/
      - rm -R docshell/test/
      - rm -R dom/apps/tests/
      - rm -R dom/base/crashtests/
      - rm -R dom/base/test/
      - rm -R dom/html/test/
      - rm -R dom/indexedDB/test/
      - rm -R dom/tests/
      - rm -R layout/base/crashtests/
      - rm -R layout/generic/crashtests/
      - rm -R layout/generic/test/
      - rm -R layout/reftests/
      - rm -R mobile/android/build/classycle/
      - rm -R mobile/android/tests/
      - rm -R modules/libmar/tests/
      - rm -R modules/libjar/test/
      - rm -R modules/libjar/zipwriter/test/
      - rm -R mozglue/linker/tests/
      - rm -R security/manager/ssl/tests/compiled/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm -R services/sync/tests/
      - rm -R testing/crashtest/
      - rm -R testing/mozbase/mozinstall/tests/
      - rm -R testing/mozbase/mozprofile/tests/
      - rm -R testing/web-platform/
      - rm -R toolkit/devtools/apps/tests/
      - rm -R toolkit/components/search/tests/
      - rm -R toolkit/modules/tests/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R toolkit/mozapps/update/tests/
      - rm -R toolkit/webapps/tests/
      - rm -R widget/crashtests/
      - rm -R xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/TESTS_MANIFESTS/,+19d' docshell/moz.build
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@f4abaa2ece7fb6c56cb75222c9df7355010ff661
    prebuild:
      - mkdir fdroid
      - fxarch=arm-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's|about:feedback|https://gitlab.com/fdroid/fdroiddata/issues|g'
        mobile/android/base/resources/xml/preferences_vendor.xml
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORT/d' -e '/MOZ_DEVICES/d' -e '/MOZ_SAFE_BROWSING/d'
        -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d' mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_SERVICES_HEALTHREPORT=\nMOZ_SAFE_BROWSING=\n'
        >> mobile/android/confvars.sh
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
      - mkdir -p layout/reftests/
      - touch layout/reftests/moz.build
      - echo "==HEALTHREPORTER=="
      - sed -i -e '/datareporting.healthreport.uploadEnabled/s/true/false/g' -e '/datareporting.healthreport.service.enabled/s/true/false/g'
        ./services/healthreport/healthreport-prefs.js
      - sed -i -e '/android.not_a_preference.healthreport.uploadEnabled/,+3s/android:defaultValue="true"/android:defaultValue="false"/g'
        mobile/android/base/resources/xml/preferences_vendor.xml
      - rm mobile/android/base/health/*
      - rm -R mobile/android/base/background/*report*
      - rm mobile/android/services/manifests/HealthReport*
      - patch -p1 <$$MozLocales$$/Remove_FHR.patch
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '40.0'
    versionCode: 400010
    commit: FENNEC_40_0_RELEASE
    init:
      - find toolkit/crashreporter/ -mindepth 1 -maxdepth 1 ! -name "crashreporter.mozbuild"
        ! -name "google-breakpad" -exec rm -R '{}' \;
      - find toolkit/crashreporter/google-breakpad/ -mindepth 1 -maxdepth 1 ! -name
        "src" -exec rm -R '{}' \;
      - rm -R toolkit/crashreporter/google-breakpad/src/tools/
      - rm -R toolkit/crashreporter/google-breakpad/src/client/
      - rm -R toolkit/crashreporter/google-breakpad/src/processor/testdata/
      - rm -R toolkit/crashreporter/google-breakpad/src/third_party/linux/
      - find dom/html/test/ -type f -exec rm '{}' \;
      - rm -R accessible/tests/
      - rm -R addon-sdk/source/test/
      - rm -R browser/devtools/debugger/test/
      - rm -R browser/devtools/webide/test/
      - rm -R build/mobile/robocop/
      - rm -R build/mobile/sutagent/
      - rm -R chrome/test/
      - rm -R content/
      - rm -R docshell/test/
      - rm -R dom/apps/tests/
      - rm -R dom/base/crashtests/
      - rm -R dom/base/test/
      - rm -R dom/html/test/
      - rm -R dom/indexedDB/test/
      - rm -R dom/tests/
      - rm -R layout/base/crashtests/
      - rm -R layout/generic/crashtests/
      - rm -R layout/generic/test/
      - rm -R layout/reftests/
      - rm -R mobile/android/build/classycle/
      - rm -R mobile/android/tests/
      - rm -R modules/libmar/tests/
      - rm -R modules/libjar/test/
      - rm -R modules/libjar/zipwriter/test/
      - rm -R mozglue/linker/tests/
      - rm -R security/manager/ssl/tests/compiled/
      - rm -R security/manager/ssl/tests/*test/
      - rm -R security/nss/cmd/bltest/tests/
      - rm -R security/nss/tests/
      - rm -R services/sync/tests/
      - rm -R testing/crashtest/
      - rm -R testing/mozbase/mozinstall/tests/
      - rm -R testing/mozbase/mozprofile/tests/
      - rm -R testing/web-platform/
      - rm -R toolkit/devtools/apps/tests/
      - rm -R toolkit/components/search/tests/
      - rm -R toolkit/modules/tests/
      - rm -R toolkit/mozapps/extensions/test/
      - rm -R toolkit/mozapps/update/tests/
      - rm -R toolkit/webapps/tests/
      - rm -R widget/crashtests/
      - rm -R xpcom/tests/
      - sed -i -e '/nsExceptionHandler/d' ipc/glue/GeckoChildProcessHost.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsAndroidStartup.cpp
      - sed -i -e '/nsExceptionHandler/d' toolkit/xre/nsEmbedFunctions.cpp
      - sed -i -e '/source\/test\//d' addon-sdk/moz.build
      - sed -i -e '/testing\/web-platform\/mach_commands.py/d' build/mach_bootstrap.py
      - sed -i -e '/TESTS_MANIFESTS/,+19d' docshell/moz.build
      - sed -i -e '/tests\//d' dom/apps/moz.build
      - sed -i -e '/test\//d' dom/html/moz.build
      - sed -i -e '/test\//d' dom/indexedDB/moz.build
      - sed -i -e '/MOCHITEST/d' layout/generic/moz.build
      - sed -i -e '/reftests\//d'  -e '/crashtest\//d' layout/moz.build
      - sed -i -e '/classycle_jar/,+7d' -e 's/.geckoview.deps ././g' -e 's/PROGUARD_PASSES=1/PROGUARD_PASSES=3/g'
        mobile/android/base/Makefile.in
      - sed -i -e '/TEST/d' modules/libjar/moz.build
      - sed -i -e '/TEST/d' modules/libjar/zipwriter/moz.build
      - sed -i -e '/\/content/d' toolkit/toolkit.mozbuild
      - sed -i -e '/xpcshell.ini/d' toolkit/components/search/moz.build
      - sed -i -e '/MOCHITEST/,+5d' toolkit/devtools/apps/moz.build
      - sed -i -e '/tests\//d' toolkit/modules/moz.build
      - sed -i -e '/tests/d' toolkit/mozapps/update/moz.build
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@f4abaa2ece7fb6c56cb75222c9df7355010ff661
    prebuild:
      - mkdir fdroid
      - fxarch=i386-linux-androideabi
      - l10ndir=`readlink -f $$MozLocales$$`
      - sed -i -e 's|about:feedback|https://gitlab.com/fdroid/fdroiddata/issues|g'
        mobile/android/base/resources/xml/preferences_vendor.xml
      - sed -i -e 's/android:debuggable="true"//g' mobile/android/base/AndroidManifest.xml.in
      - sed -i -e '/MOZ_SERVICES_HEALTHREPORT/d' -e '/MOZ_DEVICES/d' -e '/MOZ_SAFE_BROWSING/d'
        -e '/MOZ_ANDROID_RESOURCE_CONSTRAINED/,+2d' mobile/android/confvars.sh
      - echo -e 'MOZ_DEVICES=\nMOZ_NATIVE_DEVICES=\nMOZ_SERVICES_HEALTHREPORT=\nMOZ_SAFE_BROWSING=\n'
        >> mobile/android/confvars.sh
      - sed -i -e '/MOZ_ANDROID_GOOGLE_PLAY_SERVICES/d' configure.in
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" > .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$/platforms/android-22\""
        >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --disable-tests" >> .mozconfig
      - echo "ac_add_options --disable-updater" >> .mozconfig
      - echo "ac_add_options --disable-eme" >> .mozconfig
      - echo "ac_add_options --disable-mochitest" >> .mozconfig
      - echo "ac_add_options --disable-crashreporter" >> .mozconfig
      - echo "ac_add_options --disable-debug" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
      - sed -i -e 's/size_impl(v/size_impl(const v/g' memory/mozjemalloc/jemalloc.c
      - rm -R mobile/android/gradle/
      - sed -i -e '/gradle/d' mobile/android/moz.build
      - sed -i -e '/gmp-provider/d' mobile/android/app/mobile.js
      - echo 'pref("media.gmp-provider.enabled", false);' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-manager.url.override", "data:text/plain,");' >> mobile/android/app/mobile.js
      - echo 'pref("media.gmp-gmpopenh264.enabled", false);' >> mobile/android/app/mobile.js
      - sed -i -e '/casting.enabled/d' mobile/android/app/mobile.js
      - echo 'pref("browser.casting.enabled", false);' >> mobile/android/app/mobile.js
      - mkdir -p layout/reftests/
      - touch layout/reftests/moz.build
      - echo "==HEALTHREPORTER=="
      - sed -i -e '/datareporting.healthreport.uploadEnabled/s/true/false/g' -e '/datareporting.healthreport.service.enabled/s/true/false/g'
        ./services/healthreport/healthreport-prefs.js
      - sed -i -e '/android.not_a_preference.healthreport.uploadEnabled/,+3s/android:defaultValue="true"/android:defaultValue="false"/g'
        mobile/android/base/resources/xml/preferences_vendor.xml
      - rm mobile/android/base/health/*
      - rm -R mobile/android/base/background/*report*
      - rm mobile/android/services/manifests/HealthReport*
      - patch -p1 <$$MozLocales$$/Remove_FHR.patch
    scanignore:
      - mobile/android/base/JavaAddonManager.java
    build:
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '44.0'
    versionCode: 440000
    commit: FENNEC_44_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@be553c20
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/javaaddons/JavaAddonManager.java
      - mobile/android/base/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '44.0'
    versionCode: 440010
    commit: FENNEC_44_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@be553c20
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/javaaddons/JavaAddonManager.java
      - mobile/android/base/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 44.0.2
    versionCode: 440200
    commit: FENNEC_44_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@be553c20
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/javaaddons/JavaAddonManager.java
      - mobile/android/base/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 44.0.2
    versionCode: 440210
    commit: FENNEC_44_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@be553c20
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/javaaddons/JavaAddonManager.java
      - mobile/android/base/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '45.0'
    versionCode: 450000
    commit: FENNEC_45_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@c096a331
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '45.0'
    versionCode: 450010
    commit: FENNEC_45_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@c096a331
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 45.0.1
    versionCode: 450100
    commit: FENNEC_45_0_1_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@c096a331
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 45.0.1
    versionCode: 450110
    commit: FENNEC_45_0_1_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@c096a331
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 45.0.2
    versionCode: 450200
    commit: FENNEC_45_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@c096a331
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 45.0.2
    versionCode: 450210
    commit: FENNEC_45_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@c096a331
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '46.0'
    versionCode: 460000
    commit: FENNEC_46_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@181d69d02a55dedf2b7e5bc59b51510f5457585d
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '46.0'
    versionCode: 460010
    commit: FENNEC_46_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@181d69d02a55dedf2b7e5bc59b51510f5457585d
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 46.0.1
    versionCode: 460100
    commit: FENNEC_46_0_1_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@181d69d02a55dedf2b7e5bc59b51510f5457585d
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: 46.0.1
    versionCode: 460110
    commit: FENNEC_46_0_1_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@181d69d02a55dedf2b7e5bc59b51510f5457585d
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '47.0'
    versionCode: 470000
    commit: FENNEC_47_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@291fea77c697450426ac8edd43102d15ee4dd6ff
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '47.0'
    versionCode: 470010
    commit: FENNEC_47_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@291fea77c697450426ac8edd43102d15ee4dd6ff
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*.apk fdroid/fennec-unsigned.apk
      - zip -d fdroid/fennec-unsigned.apk "META-INF*"

  - versionName: '48.0'
    versionCode: 480000
    commit: FENNEC_48_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@e4c1be1ef875fb90f913f300e743d91e4160d1fc
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk

  - versionName: '48.0'
    versionCode: 480010
    commit: FENNEC_48_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@e4c1be1ef875fb90f913f300e743d91e4160d1fc
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk

  - versionName: '49.0'
    versionCode: 490000
    commit: FENNEC_49_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@cc417297fe493431e92989a48ab1207265e26b28
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: '49.0'
    versionCode: 490010
    commit: FENNEC_49_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@cc417297fe493431e92989a48ab1207265e26b28
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; make LOCALE_MERGEDIR=$PWD/merge-$loc
        chrome-$loc LOCALE_MERGEDIR=$PWD/merge-$loc; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: 49.0.2
    versionCode: 490200
    commit: FENNEC_49_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@cc417297fe493431e92989a48ab1207265e26b28
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: 49.0.2
    versionCode: 490210
    commit: FENNEC_49_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@cc417297fe493431e92989a48ab1207265e26b28
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: '50.0'
    versionCode: 500000
    commit: FENNEC_50_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@b18c1f6854f094ef480221f121da6f324540a513
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: '50.0'
    versionCode: 500010
    commit: FENNEC_50_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@b18c1f6854f094ef480221f121da6f324540a513
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: 50.0.2
    versionCode: 500200
    commit: FENNEC_50_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@b18c1f6854f094ef480221f121da6f324540a513
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: 50.0.2
    versionCode: 500210
    commit: FENNEC_50_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@b18c1f6854f094ef480221f121da6f324540a513
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: 50.1.0
    versionCode: 501000
    commit: FENNEC_50_1_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@b18c1f6854f094ef480221f121da6f324540a513
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: 50.1.0
    versionCode: 501010
    commit: FENNEC_50_1_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@b18c1f6854f094ef480221f121da6f324540a513
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r10e

  - versionName: '51.0'
    versionCode: 510000
    commit: FENNEC_51_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@27357771a7a88563d5d5e5096f27e6b7c0be4fe0
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '51.0'
    versionCode: 510010
    commit: FENNEC_51_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@27357771a7a88563d5d5e5096f27e6b7c0be4fe0
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 51.0.4
    versionCode: 510400
    commit: FENNEC_51_0_4_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@27357771a7a88563d5d5e5096f27e6b7c0be4fe0
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 51.0.4
    versionCode: 510410
    commit: FENNEC_51_0_4_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@27357771a7a88563d5d5e5096f27e6b7c0be4fe0
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '52.0'
    versionCode: 520000
    commit: FENNEC_52_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@14b2691d5c59b261bf8ec19f6b26a520e807099f
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '52.0'
    versionCode: 520010
    commit: FENNEC_52_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@14b2691d5c59b261bf8ec19f6b26a520e807099f
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 52.0.1
    versionCode: 520100
    commit: FENNEC_52_0_1_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@14b2691d5c59b261bf8ec19f6b26a520e807099f
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 52.0.1
    versionCode: 520110
    commit: FENNEC_52_0_1_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@14b2691d5c59b261bf8ec19f6b26a520e807099f
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 52.0.2
    versionCode: 520200
    commit: FENNEC_52_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@14b2691d5c59b261bf8ec19f6b26a520e807099f
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 52.0.2
    versionCode: 520210
    commit: FENNEC_52_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@14b2691d5c59b261bf8ec19f6b26a520e807099f
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 53.0.2
    versionCode: 530200
    commit: FENNEC_53_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@30b165a10e13854fcd80403da0cb6233b2629c77
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.16.0-`uname -m`-unknown-linux-gnu.tar.gz
        | tar -x -z -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.16.0-armv7-linux-androideabi.tar.gz
        | tar -x -z -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 53.0.2
    versionCode: 530210
    commit: FENNEC_53_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@30b165a10e13854fcd80403da0cb6233b2629c77
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.16.0-`uname -m`-unknown-linux-gnu.tar.gz
        | tar -x -z -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.16.0-i686-linux-android.tar.gz
        | tar -x -z -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '54.0'
    versionCode: 540000
    commit: FENNEC_54_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@964dd9c65da0e8ebc401dc4d5ef665f787bf1c2e
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.18.0-`uname -m`-unknown-linux-gnu.tar.gz
        | tar -x -z -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.18.0-armv7-linux-androideabi.tar.gz
        | tar -x -z -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '54.0'
    versionCode: 540010
    commit: FENNEC_54_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@964dd9c65da0e8ebc401dc4d5ef665f787bf1c2e
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.18.0-`uname -m`-unknown-linux-gnu.tar.gz
        | tar -x -z -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.18.0-i686-linux-android.tar.gz
        | tar -x -z -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 54.0.1
    versionCode: 540100
    commit: FENNEC_54_0_1_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@964dd9c65da0e8ebc401dc4d5ef665f787bf1c2e
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.18.0-`uname -m`-unknown-linux-gnu.tar.gz
        | tar -x -z -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.18.0-armv7-linux-androideabi.tar.gz
        | tar -x -z -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 54.0.1
    versionCode: 540110
    commit: FENNEC_54_0_1_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@964dd9c65da0e8ebc401dc4d5ef665f787bf1c2e
    prebuild:
      - mkdir fdroid
      - fxarch=`echo $$VERCODE$$ | cut -c 5 | sed -e 's/0/arm-linux-androideabi/g'
        -e 's/1/i386-linux-androideabi/g'`
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --target=${fxarch}" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export ANDROID_VERSION_CODE=$$VERCODE$$'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - popd
    scanignore:
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManager.java
      - mobile/android/base/java/org/mozilla/gecko/javaaddons/JavaAddonManagerV1.java
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.18.0-`uname -m`-unknown-linux-gnu.tar.gz
        | tar -x -z -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.18.0-i686-linux-android.tar.gz
        | tar -x -z -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - fxarch=`grep "ac_add_options --target=" .mozconfig | cut -d '=' -f2`
      - pushd obj-${fxarch}/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-${fxarch}/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '55.0'
    versionCode: 550000
    commit: FENNEC_55_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@f9db105d36b5496792f4b0a126a008b1ae108472
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=15" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.19.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.19.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-arm-linux-androideabi/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-arm-linux-androideabi/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '55.0'
    versionCode: 550010
    commit: FENNEC_55_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@f9db105d36b5496792f4b0a126a008b1ae108472
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=15" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.19.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.19.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-i386-linux-androideabi/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-i386-linux-androideabi/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '55.0'
    versionCode: 550020
    commit: FENNEC_55_0_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@f9db105d36b5496792f4b0a126a008b1ae108472
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.19.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.19.0-aarch64-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-aarch64-linux-android/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-aarch64-linux-android/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 55.0.2
    versionCode: 550200
    commit: FENNEC_55_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@f9db105d36b5496792f4b0a126a008b1ae108472
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=15" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.19.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.19.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-arm-linux-androideabi/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-arm-linux-androideabi/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 55.0.2
    versionCode: 550210
    commit: FENNEC_55_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@f9db105d36b5496792f4b0a126a008b1ae108472
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=15" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.19.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.19.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-i386-linux-androideabi/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-i386-linux-androideabi/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: 55.0.2
    versionCode: 550220
    commit: FENNEC_55_0_2_RELEASE
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@f9db105d36b5496792f4b0a126a008b1ae108472
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.19.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.19.0-aarch64-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-aarch64-linux-android/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-aarch64-linux-android/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '56.0'
    versionCode: 560000
    commit: FENNEC_56_0_RELEASE
    sudo: apt-get install -y g++
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@18b4a210745249f1152c40f48d6eb75c12aff7db
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-arm-linux-androideabi/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-arm-linux-androideabi/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '56.0'
    versionCode: 560010
    commit: FENNEC_56_0_RELEASE
    sudo: apt-get install -y g++
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@18b4a210745249f1152c40f48d6eb75c12aff7db
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-i386-linux-androideabi/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-i386-linux-androideabi/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '56.0'
    versionCode: 560020
    commit: FENNEC_56_0_RELEASE
    sudo: apt-get install -y g++
    output: fdroid/fennec-unsigned.apk
    srclibs:
      - MozLocales@18b4a210745249f1152c40f48d6eb75c12aff7db
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-aarch64-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - pushd obj-aarch64-linux-android/mobile/android/locales
      - for loc in $(cat ../../../../mobile/android/locales/maemo-locales); do LOCALE_MERGEDIR=$PWD/merge-$loc
        make merge-$loc || exit 1; LOCALE_MERGEDIR=$PWD/merge-$loc make chrome-$loc
        || exit 1; done
      - popd
      - ./mach package
      - mv obj-aarch64-linux-android/dist/fennec-*-unsigned-unaligned.apk fdroid/fennec-unsigned.apk
    ndk: r12b

  - versionName: '57.0'
    versionCode: 570000
    commit: FENNEC_57_0_RELEASE
    sudo: apt-get install -y g++
    output: obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
    srclibs:
      - MozLocales@74141a50fb02613eebaa31d51b08ce9923d0d326
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-arm-linux-androideabi/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
    ndk: r12b

  - versionName: '57.0'
    versionCode: 570010
    commit: FENNEC_57_0_RELEASE
    sudo: apt-get install -y g++
    output: obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
    srclibs:
      - MozLocales@74141a50fb02613eebaa31d51b08ce9923d0d326
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-i386-linux-androideabi/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
    ndk: r12b

  - versionName: '57.0'
    versionCode: 570020
    commit: FENNEC_57_0_RELEASE
    sudo: apt-get install -y g++
    output: obj-aarch64-linux-android/dist/fennec-$$VERSION$$.en-US.android-aarch64-unsigned-unaligned.apk
    srclibs:
      - MozLocales@74141a50fb02613eebaa31d51b08ce9923d0d326
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-aarch64-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-aarch64-linux-android/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
    ndk: r12b

  - versionName: 57.0.1
    versionCode: 570100
    commit: FENNEC_57_0_1_RELEASE
    sudo: apt-get install -y g++
    output: obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
    srclibs:
      - MozLocales@74141a50fb02613eebaa31d51b08ce9923d0d326
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-arm-linux-androideabi/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
    ndk: r12b

  - versionName: 57.0.1
    versionCode: 570110
    commit: FENNEC_57_0_1_RELEASE
    sudo: apt-get install -y g++
    output: obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
    srclibs:
      - MozLocales@74141a50fb02613eebaa31d51b08ce9923d0d326
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-i386-linux-androideabi/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
    ndk: r12b

  - versionName: 57.0.4
    versionCode: 570400
    commit: FENNEC_57_0_4_RELEASE
    sudo: apt-get install -y g++
    output: obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
    srclibs:
      - MozLocales@74141a50fb02613eebaa31d51b08ce9923d0d326
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-arm-linux-androideabi/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
    ndk: r12b

  - versionName: 57.0.4
    versionCode: 570410
    commit: FENNEC_57_0_4_RELEASE
    sudo: apt-get install -y g++
    output: obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
    srclibs:
      - MozLocales@74141a50fb02613eebaa31d51b08ce9923d0d326
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.20.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.20.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-i386-linux-androideabi/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
    ndk: r12b

  - versionName: 58.0.2
    versionCode: 580200
    commit: FENNEC_58_0_2_RELEASE
    timeout: 21600
    sudo: apt-get install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
    srclibs:
      - MozLocales@f39951ae735980571966856e13110c23377bee50
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.21.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.21.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-arm-linux-androideabi/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
      - zip -d obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 58.0.2
    versionCode: 580210
    commit: FENNEC_58_0_2_RELEASE
    timeout: 21600
    sudo: apt-get install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
    srclibs:
      - MozLocales@f39951ae735980571966856e13110c23377bee50
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.21.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.21.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % make -C obj-i386-linux-androideabi/mobile/android/locales
        LOCALE_MERGEDIR=merge-% merge-% chrome-%
      - ./mach package
      - zip -d obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 59.0.1
    versionCode: 590100
    commit: FENNEC_59_0_1_RELEASE
    timeout: 21600
    sudo: apt-get install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
    srclibs:
      - MozLocales@a5bbd6bf9e94673e0ed53b4b8a965db48accc63f
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.22.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.22.1-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % ./mach build chrome-%
      - AB_CD=multi ./mach package
      - ./mach package
      - zip -d obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 59.0.1
    versionCode: 590110
    commit: FENNEC_59_0_1_RELEASE
    timeout: 21600
    sudo: apt-get install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
    srclibs:
      - MozLocales@a5bbd6bf9e94673e0ed53b4b8a965db48accc63f
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.22.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.22.1-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % ./mach build chrome-%
      - AB_CD=multi ./mach package
      - ./mach package
      - zip -d obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 59.0.2
    versionCode: 590200
    commit: FENNEC_59_0_2_RELEASE
    timeout: 21600
    sudo:
      - apt update
      - apt install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
    srclibs:
      - MozLocales@a5bbd6bf9e94673e0ed53b4b8a965db48accc63f
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.22.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.22.1-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % ./mach build chrome-%
      - AB_CD=multi ./mach package
      - ./mach package
      - zip -d obj-arm-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-arm-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 59.0.2
    versionCode: 590210
    commit: FENNEC_59_0_2_RELEASE
    timeout: 21600
    sudo:
      - apt update
      - apt install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
    srclibs:
      - MozLocales@a5bbd6bf9e94673e0ed53b4b8a965db48accc63f
    prebuild:
      - mkdir fdroid
      - l10ndir=`readlink -f $$MozLocales$$`
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-l10n-base=${l10ndir}" >> .mozconfig
      - echo "mk_add_options 'export L10NBASEDIR=${l10ndir}'" >> .mozconfig
      - echo "mk_add_options 'export MOZ_CHROME_MULTILOCALE=$(tr '\n' ' ' <  mobile/android/locales/maemo-locales)'"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.22.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.22.1-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat mobile/android/locales/maemo-locales | xargs -I % ./mach build chrome-%
      - AB_CD=multi ./mach package
      - ./mach package
      - zip -d obj-i386-linux-androideabi/dist/fennec-$$VERSION$$.en-US.android-i386-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: '60.0'
    versionCode: 600000
    commit: FENNEC_60_0_RELEASE
    timeout: 21600
    sudo:
      - apt update
      - apt install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@20ad83b906b6c7c8b139356b62915ca32e584001
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.24.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.24.1-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH=$PATH:$PWD/rust/bin
      - mkdir clang+llvm
      - curl https://releases.llvm.org/6.0.0/clang+llvm-6.0.0-x86_64-linux-gnu-debian8.tar.xz
        | tar -x -J -C clang+llvm --strip-components 1
      - export LLVM_CONFIG=$PWD/clang+llvm/bin/llvm-config
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: '60.0'
    versionCode: 600010
    commit: FENNEC_60_0_RELEASE
    timeout: 21600
    sudo:
      - apt update
      - apt install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@20ad83b906b6c7c8b139356b62915ca32e584001
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.24.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.24.1-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH=$PATH:$PWD/rust/bin
      - mkdir clang+llvm
      - curl https://releases.llvm.org/6.0.0/clang+llvm-6.0.0-x86_64-linux-gnu-debian8.tar.xz
        | tar -x -J -C clang+llvm --strip-components 1
      - export LLVM_CONFIG=$PWD/clang+llvm/bin/llvm-config
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 60.0.1
    versionCode: 600100
    commit: FENNEC_60_0_1_RELEASE
    timeout: 21600
    sudo:
      - apt update
      - apt install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@20ad83b906b6c7c8b139356b62915ca32e584001
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.24.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.24.1-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 60.0.1
    versionCode: 600110
    commit: FENNEC_60_0_1_RELEASE
    timeout: 21600
    sudo:
      - apt update
      - apt install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@20ad83b906b6c7c8b139356b62915ca32e584001
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.24.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.24.1-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 60.0.2
    versionCode: 600200
    commit: FENNEC_60_0_2_RELEASE
    timeout: 21600
    sudo:
      - apt update
      - apt install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@20ad83b906b6c7c8b139356b62915ca32e584001
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.24.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.24.1-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 60.0.2
    versionCode: 600210
    commit: FENNEC_60_0_2_RELEASE
    timeout: 21600
    sudo:
      - apt update
      - apt install -y g++ proguard-cli/testing libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@20ad83b906b6c7c8b139356b62915ca32e584001
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.24.1-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.24.1-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: '61.0'
    versionCode: 610000
    commit: FENNEC_61_0_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@03e502fcd96a5cd64cb57a0b8cb1e39ee17b9ef1
      - pyenv@v1.2.4
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - curl https://ftp.gnu.org/gnu/gcc/gcc-6.4.0/gcc-6.4.0.tar.xz | tar -x -J
      - mkdir gcc
      - pushd gcc-6.4.0
      - ./configure --enable-languages=c,c++ --disable-multilib --prefix="$PWD/../gcc"
      - make -j`nproc`
      - make install
      - popd
      - export PATH="$PWD/gcc/bin:$PATH"
      - export LD_LIBRARY_PATH="$PWD/gcc/lib64"
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.5
      - pyenv global 3.5.5
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.25.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.25.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: '61.0'
    versionCode: 610001
    commit: FENNEC_61_0_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@03e502fcd96a5cd64cb57a0b8cb1e39ee17b9ef1
      - pyenv@v1.2.4
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - curl https://ftp.gnu.org/gnu/gcc/gcc-6.4.0/gcc-6.4.0.tar.xz | tar -x -J
      - mkdir gcc
      - pushd gcc-6.4.0
      - ./configure --enable-languages=c,c++ --disable-multilib --prefix="$PWD/../gcc"
      - make -j`nproc`
      - make install
      - popd
      - export PATH="$PWD/gcc/bin:$PATH"
      - export LD_LIBRARY_PATH="$PWD/gcc/lib64"
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.5
      - pyenv global 3.5.5
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.25.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.25.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: '61.0'
    versionCode: 610010
    commit: FENNEC_61_0_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@03e502fcd96a5cd64cb57a0b8cb1e39ee17b9ef1
      - pyenv@v1.2.4
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - curl https://ftp.gnu.org/gnu/gcc/gcc-6.4.0/gcc-6.4.0.tar.xz | tar -x -J
      - mkdir gcc
      - pushd gcc-6.4.0
      - ./configure --enable-languages=c,c++ --disable-multilib --prefix="$PWD/../gcc"
      - make -j`nproc`
      - make install
      - popd
      - export PATH="$PWD/gcc/bin:$PATH"
      - export LD_LIBRARY_PATH="$PWD/gcc/lib64"
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.5
      - pyenv global 3.5.5
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.25.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.25.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH="$PATH:$PWD/rust/bin"
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: '61.0'
    versionCode: 610011
    commit: FENNEC_61_0_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@03e502fcd96a5cd64cb57a0b8cb1e39ee17b9ef1
      - pyenv@v1.2.4
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - curl https://ftp.gnu.org/gnu/gcc/gcc-6.4.0/gcc-6.4.0.tar.xz | tar -x -J
      - mkdir gcc
      - pushd gcc-6.4.0
      - ./configure --enable-languages=c,c++ --disable-multilib --prefix="$PWD/../gcc"
      - make -j`nproc`
      - make install
      - popd
      - export PATH="$PWD/gcc/bin:$PATH"
      - export LD_LIBRARY_PATH="$PWD/gcc/lib64"
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.5
      - pyenv global 3.5.5
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.25.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.25.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH="$PATH:$PWD/rust/bin"
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 61.0.2
    versionCode: 610200
    commit: FENNEC_61_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@ac41772572ce2a6ab7d265670f1fef81509a53a5
      - pyenv@v1.2.4
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - curl https://ftp.gnu.org/gnu/gcc/gcc-6.4.0/gcc-6.4.0.tar.xz | tar -x -J
      - mkdir gcc
      - pushd gcc-6.4.0
      - ./configure --enable-languages=c,c++ --disable-multilib --prefix="$PWD/../gcc"
      - make -j`nproc`
      - make install
      - popd
      - export PATH="$PWD/gcc/bin:$PATH"
      - export LD_LIBRARY_PATH="$PWD/gcc/lib64"
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.5
      - pyenv global 3.5.5
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.25.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.25.0-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 61.0.2
    versionCode: 610210
    commit: FENNEC_61_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@ac41772572ce2a6ab7d265670f1fef81509a53a5
      - pyenv@v1.2.4
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - curl https://ftp.gnu.org/gnu/gcc/gcc-6.4.0/gcc-6.4.0.tar.xz | tar -x -J
      - mkdir gcc
      - pushd gcc-6.4.0
      - ./configure --enable-languages=c,c++ --disable-multilib --prefix="$PWD/../gcc"
      - make -j`nproc`
      - make install
      - popd
      - export PATH="$PWD/gcc/bin:$PATH"
      - export LD_LIBRARY_PATH="$PWD/gcc/lib64"
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.5
      - pyenv global 3.5.5
      - mkdir rust
      - curl https://static.rust-lang.org/dist/rust-1.25.0-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl https://static.rust-lang.org/dist/rust-std-1.25.0-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH="$PATH:$PWD/rust/bin"
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 62.0.1
    versionCode: 620100
    commit: FENNEC_62_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@c795b1463d98524da163ae29c0343be13c4f6392
      - pyenv@v1.2.7
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir clang+llvm
      - curl --retry 3 https://releases.llvm.org/6.0.0/clang+llvm-6.0.0-x86_64-linux-gnu-debian8.tar.xz
        | tar -x -J -C clang+llvm --strip-components 1
      - export LLVM_CONFIG=$PWD/clang+llvm/bin/llvm-config
      - export HOST_CC=$PWD/clang+llvm/bin/clang
      - export HOST_CXX=$PWD/clang+llvm/bin/clang++
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.6
      - pyenv global 3.5.6
      - mkdir rust
      - curl --retry 3 https://static.rust-lang.org/dist/rust-1.26.2-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl --retry 3 https://static.rust-lang.org/dist/rust-std-1.26.2-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 62.0.1
    versionCode: 620110
    commit: FENNEC_62_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@c795b1463d98524da163ae29c0343be13c4f6392
      - pyenv@v1.2.7
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir clang+llvm
      - curl --retry 3 https://releases.llvm.org/6.0.0/clang+llvm-6.0.0-x86_64-linux-gnu-debian8.tar.xz
        | tar -x -J -C clang+llvm --strip-components 1
      - export LLVM_CONFIG=$PWD/clang+llvm/bin/llvm-config
      - export HOST_CC=$PWD/clang+llvm/bin/clang
      - export HOST_CXX=$PWD/clang+llvm/bin/clang++
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.6
      - pyenv global 3.5.6
      - mkdir rust
      - curl --retry 3 https://static.rust-lang.org/dist/rust-1.26.2-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl --retry 3 https://static.rust-lang.org/dist/rust-std-1.26.2-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH="$PATH:$PWD/rust/bin"
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 62.0.1
    versionCode: 620120
    commit: FENNEC_62_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@c795b1463d98524da163ae29c0343be13c4f6392
      - pyenv@v1.2.7
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir clang+llvm
      - curl --retry 3 https://releases.llvm.org/6.0.0/clang+llvm-6.0.0-x86_64-linux-gnu-debian8.tar.xz
        | tar -x -J -C clang+llvm --strip-components 1
      - export LLVM_CONFIG=$PWD/clang+llvm/bin/llvm-config
      - export HOST_CC=$PWD/clang+llvm/bin/clang
      - export HOST_CXX=$PWD/clang+llvm/bin/clang++
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.6
      - pyenv global 3.5.6
      - mkdir rust
      - curl --retry 3 https://static.rust-lang.org/dist/rust-1.26.2-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl --retry 3 https://static.rust-lang.org/dist/rust-std-1.26.2-aarch64-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH="$PATH:$PWD/rust/bin"
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 62.0.2
    versionCode: 620200
    commit: FENNEC_62_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@c795b1463d98524da163ae29c0343be13c4f6392
      - pyenv@v1.2.7
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir clang+llvm
      - curl --retry 3 https://releases.llvm.org/6.0.0/clang+llvm-6.0.0-x86_64-linux-gnu-debian8.tar.xz
        | tar -x -J -C clang+llvm --strip-components 1
      - export LLVM_CONFIG=$PWD/clang+llvm/bin/llvm-config
      - export HOST_CC=$PWD/clang+llvm/bin/clang
      - export HOST_CXX=$PWD/clang+llvm/bin/clang++
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.6
      - pyenv global 3.5.6
      - mkdir rust
      - curl --retry 3 https://static.rust-lang.org/dist/rust-1.26.2-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl --retry 3 https://static.rust-lang.org/dist/rust-std-1.26.2-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 62.0.2
    versionCode: 620210
    commit: FENNEC_62_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli/testing
        libproguard-java/testing
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@c795b1463d98524da163ae29c0343be13c4f6392
      - pyenv@v1.2.7
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir clang+llvm
      - curl --retry 3 https://releases.llvm.org/6.0.0/clang+llvm-6.0.0-x86_64-linux-gnu-debian8.tar.xz
        | tar -x -J -C clang+llvm --strip-components 1
      - export LLVM_CONFIG=$PWD/clang+llvm/bin/llvm-config
      - export HOST_CC=$PWD/clang+llvm/bin/clang
      - export HOST_CXX=$PWD/clang+llvm/bin/clang++
      - export PYENV_ROOT="$(realpath '$$pyenv$$')"
      - export PATH="$PYENV_ROOT/bin:$PATH"
      - eval "$(pyenv init -)"
      - pyenv install 3.5.6
      - pyenv global 3.5.6
      - mkdir rust
      - curl --retry 3 https://static.rust-lang.org/dist/rust-1.26.2-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl --retry 3 https://static.rust-lang.org/dist/rust-std-1.26.2-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH="$PATH:$PWD/rust/bin"
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 62.0.3
    versionCode: 620300
    commit: FENNEC_62_0_3_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli libproguard-java
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@c795b1463d98524da163ae29c0343be13c4f6392
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl --retry 3 https://static.rust-lang.org/dist/rust-1.26.2-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl --retry 3 https://static.rust-lang.org/dist/rust-std-1.26.2-armv7-linux-androideabi.tar.xz
        | tar -x -J -C rust --strip-components 2
      - PATH=$PATH:$PWD/rust/bin ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 62.0.3
    versionCode: 620310
    commit: FENNEC_62_0_3_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli libproguard-java
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@c795b1463d98524da163ae29c0343be13c4f6392
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i386-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - export I_PREFER_A_SUBOPTIMAL_MERCURIAL_EXPERIENCE=1
      - mkdir rust
      - curl --retry 3 https://static.rust-lang.org/dist/rust-1.26.2-`uname -m`-unknown-linux-gnu.tar.xz
        | tar -x -J -C rust --strip-components 2
      - curl --retry 3 https://static.rust-lang.org/dist/rust-std-1.26.2-i686-linux-android.tar.xz
        | tar -x -J -C rust --strip-components 2
      - export PATH="$PATH:$PWD/rust/bin"
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: '63.0'
    versionCode: 630000
    commit: FENNEC_63_0_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli libproguard-java
      - apt install -y -t testing nodejs
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@9e2ceb189feea59b7cbae3cd51ebba99bbcc7f53
      - rustup@1.14.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.29.2
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.6.6 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: '63.0'
    versionCode: 630010
    commit: FENNEC_63_0_RELEASE
    timeout: 28800
    sudo:
      - apt update
      - apt install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli libproguard-java
      - apt install -y -t testing nodejs
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@9e2ceb189feea59b7cbae3cd51ebba99bbcc7f53
      - rustup@1.14.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.29.2
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.6.6 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 63.0.2
    versionCode: 630200
    commit: FENNEC_63_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli libproguard-java
      - apt-get install -y -t testing nodejs
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@9e2ceb189feea59b7cbae3cd51ebba99bbcc7f53
      - rustup@1.14.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.29.2
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.6.6 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 63.0.2
    versionCode: 630210
    commit: FENNEC_63_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev proguard-cli libproguard-java
      - apt-get install -y -t testing nodejs
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@9e2ceb189feea59b7cbae3cd51ebba99bbcc7f53
      - rustup@1.14.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options 'export PROGUARD_JAR=/usr/share/java/proguard.jar'" >>
        .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.29.2
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.6.6 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 64.0.1
    versionCode: 640100
    commit: FENNEC_64_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@60d879a279c3ced9746400f5bd7e1e8deffad025
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.29.2
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.6.7 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 64.0.1
    versionCode: 640110
    commit: FENNEC_64_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@60d879a279c3ced9746400f5bd7e1e8deffad025
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - sed -i -e 's/libclang.so.1/libclang.so.6/' build/moz.configure/bindgen.configure
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.29.2
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.6.7 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r17b

  - versionName: 64.0.2
    versionCode: 640200
    commit: FENNEC_64_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@60d879a279c3ced9746400f5bd7e1e8deffad025
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.29.2
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.6.7 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r15c

  - versionName: 64.0.2
    versionCode: 640210
    commit: FENNEC_64_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@60d879a279c3ced9746400f5bd7e1e8deffad025
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - sed -i -e 's/libclang.so.1/libclang.so.6/' build/moz.configure/bindgen.configure
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.29.2
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.6.7 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r17b

  - versionName: '65.0'
    versionCode: 650000
    commit: FENNEC_65_0_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@49859882ca1e77dee09ceaa2e752747daaa085f5
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.31.1
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.7.1 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: '65.0'
    versionCode: 650010
    commit: FENNEC_65_0_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@49859882ca1e77dee09ceaa2e752747daaa085f5
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.31.1
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.7.1 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: 65.0.1
    versionCode: 650100
    commit: FENNEC_65_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@49859882ca1e77dee09ceaa2e752747daaa085f5
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.31.1
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.7.1 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: 65.0.1
    versionCode: 650110
    commit: FENNEC_65_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@49859882ca1e77dee09ceaa2e752747daaa085f5
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.31.1
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.7.1 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: '66.0'
    versionCode: 660000
    commit: FENNEC_66_0_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: '66.0'
    versionCode: 660010
    commit: FENNEC_66_0_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: 66.0.1
    versionCode: 660100
    commit: FENNEC_66_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: 66.0.1
    versionCode: 660110
    commit: FENNEC_66_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: 66.0.1
    versionCode: 660120
    commit: FENNEC_66_0_1_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add aarch64-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19

  - versionName: 66.0.2
    versionCode: 660200
    commit: FENNEC_66_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: 66.0.2
    versionCode: 660210
    commit: FENNEC_66_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: 66.0.2
    versionCode: 660220
    commit: FENNEC_66_0_2_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add aarch64-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: 66.0.4
    versionCode: 660400
    commit: FENNEC_66_0_4_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: 66.0.4
    versionCode: 660410
    commit: FENNEC_66_0_4_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: 66.0.4
    versionCode: 660420
    commit: FENNEC_66_0_4_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add aarch64-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: 66.0.5
    versionCode: 660500
    commit: FENNEC_66_0_5_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: 66.0.5
    versionCode: 660510
    commit: FENNEC_66_0_5_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: 66.0.5
    versionCode: 660520
    commit: FENNEC_66_0_5_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@17623bb918695f15af787bc8755deb7c4608a162
      - rustup@1.16.0
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.32.0
      - rustup target add aarch64-linux-android
      - cargo install --force --vers 0.8.2 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: '67.0'
    versionCode: 670000
    commit: FENNEC_67_0_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ llvm libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@b071e8a820297017fc9dc4a0385a415ebd0b25d6
      - rustup@1.18.2
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=arm-linux-androideabi" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.34.2
      - rustup target add armv7-linux-androideabi
      - cargo install --force --vers 0.8.7 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: '67.0'
    versionCode: 670010
    commit: FENNEC_67_0_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ llvm libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@b071e8a820297017fc9dc4a0385a415ebd0b25d6
      - rustup@1.18.2
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=i686-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=16" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.34.2
      - rustup target add i686-linux-android
      - cargo install --force --vers 0.8.7 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

  - versionName: '67.0'
    versionCode: 670020
    commit: FENNEC_67_0_RELEASE
    timeout: 28800
    sudo:
      - apt-get update || apt-get update
      - apt-get install -y g++ llvm libgmp-dev libmpfr-dev libmpc-dev
    output: obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
    srclibs:
      - MozLocales@b071e8a820297017fc9dc4a0385a415ebd0b25d6
      - rustup@1.18.2
    prebuild:
      - bash $$MozLocales$$/prebuild.sh
      - echo "ac_add_options --target=aarch64-linux-android" >> .mozconfig
      - echo "ac_add_options --with-android-min-sdk=21" >> .mozconfig
      - echo "ac_add_options --with-android-ndk=\"$$NDK$$\"" >> .mozconfig
      - echo "ac_add_options --with-android-sdk=\"$$SDK$$\"" >> .mozconfig
      - echo "ac_add_options --enable-application=mobile/android" >> .mozconfig
      - echo "ac_add_options --with-branding=mobile/android/branding/unofficial" >>
        .mozconfig
      - echo "ac_add_options --with-libclang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/lib64/"
        >> .mozconfig
      - echo "ac_add_options --with-clang-path=$$NDK$$/toolchains/llvm/prebuilt/linux-x86_64/bin/clang"
        >> .mozconfig
      - echo "mk_add_options MOZ_OBJDIR=@TOPSRCDIR@/obj" >> .mozconfig
      - pushd mobile/android/branding/unofficial/
      - sed -i -e '/ANDROID_PACKAGE_NAME/d' -e '/MOZ_APP_DISPLAYNAME/d' configure.sh
      - echo 'ANDROID_PACKAGE_NAME=org.mozilla.fennec_fdroid' >> configure.sh
      - echo 'MOZ_APP_DISPLAYNAME="Fennec F-Droid"' >> configure.sh
      - echo 'MOZ_APP_ANDROID_VERSION_CODE=$$VERCODE$$' >> configure.sh
      - sed -i -e 's/Mozilla Fennec/Fennec F-Droid/g' locales/en-US/brand*
      - popd
    build:
      - $$rustup$$/rustup-init.sh -y
      - source $HOME/.cargo/env
      - rustup default 1.34.2
      - rustup target add aarch64-linux-android
      - cargo install --force --vers 0.8.7 cbindgen
      - ./mach build
      - cat used-locales | xargs -I % ./mach build chrome-%
      - make -C obj/mobile/android/base android_apks
      - make -C obj package AB_CD=multi
      - zip -d obj/dist/fennec-$$VERSION$$.multi.android-*-unsigned-unaligned.apk
        'META-INF/*.*'
    ndk: r19c

MaintainerNotes: |4-

    Updating/Versioning:
    * Update Check Mode:Tags ^FENNEC_[1-9][0-9]*_[0-9]*_RELEASE$
    * versionCode via ANDROID_VERSION_CODE is datestring with some magic applied and changes every build!
    * Since we no longer target an official build, we are free to use any version code.
    ** Current scheme: XYZAR, where X.Y.Z is upstream version, A is architecture (0 = ARMv7, 1 = x86, 2 = ARMv8), R is revision (if we need to re-release)
    ** Example: 530210 = Firefox 53.0.2 for x86, initial revision
    ** Example: 550021 = Firefox 55.0 for ARMv8, second revision
    * Builds for different architectures target different Android API levels: 16 for 32-bit (ARMv7 and x86) and 21 for 64-bit (ARMv8).
    * Required SDK and NDK versions: https://developer.mozilla.org/en-US/docs/Mozilla/Developer_guide/Build_Instructions/Simple_Firefox_for_Android_build#Required_Android_SDK_and_NDK_versions
    * Required Rust versions: https://wiki.mozilla.org/Rust_Update_Policy_for_Firefox#Schedule
    * Firefox 61 requires at least Python 3.5 and GCC 6.1. We have to install Python and GCC from source because their versions in Debian Jessie are too old. This should be dropped once the build VM is upgraded to Debian Stretch.

    Reroute Feedback:
    * about:feedback links to the Play Store for rating the app. While with F-Droid installed, we can intercept the intent and open the page in F-Droid client instead, there is no way to rate the app. If F-Droid is not installed (or Play is configured to be used always), no app info page is displayed at all: Our package id is not in Play Store! Some options:
    ** sed -i -e '/OpenPlayStore/,+4s/getPackageName()/"org.mozilla.fennec"/g' mobile/android/base/BrowserApp.java
    ** sed -i -e 's|about:feedback|https://gitlab.com/fdroid/fdroiddata/issues|g' mobile/android/base/resources/xml/preferences_vendor.xml

ArchivePolicy: 6 versions
AutoUpdateMode: None
UpdateCheckMode: None
CurrentVersion: '67.0'
CurrentVersionCode: 670020
