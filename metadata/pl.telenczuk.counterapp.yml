Categories:
  - Navigation
  - Science & Education
  - Sports & Health
License: GPL-3.0-only
AuthorName: Bartosz Telenczuk
AuthorEmail: bartosz@telenczuk.pl
AuthorWebSite: https://mastodon.social/@btel
SourceCode: https://framagit.org/btel/counter-app
IssueTracker: https://framagit.org/btel/counter-app/-/issues
Liberapay: btel

AutoName: Rue:barbe

RepoType: git
Repo: https://framagit.org/btel/counter-app.git
Binaries: https://framagit.org/btel/counter-app/-/releases/%v/downloads/apk

Builds:
  - versionName: '1.0'
    versionCode: 1
    commit: 2952cb839c435d50e76850de7be9214998c090ff
    subdir: android/app/
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - curl -Lo node.tar.gz https://nodejs.org/dist/v22.14.0/node-v22.14.0-linux-x64.tar.gz
      - echo "9d942932535988091034dc94cc5f42b6dc8784d6366df3a36c4c9ccb3996f0c2  node.tar.gz"
        | sha256sum -c -
      - tar xzf node.tar.gz --strip-components=1 -C /usr/local/
    init:
      - cd ../..
      - npm cache clean --force
      - npm ci
    gradle:
      - yes
    prebuild: sed -i '/implementation "com\.google\.android\.gms:play-services-location/d'
      ../../node_modules/@maplibre/maplibre-react-native/android/build.gradle
    scanignore:
      - node_modules/@react-native-async-storage/async-storage/android/build.gradle
      - node_modules/@react-native-community/geolocation/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-sqlite-2/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
    scandelete:
      - node_modules
    ndk: 27.1.12297006

  - versionName: '1.1'
    versionCode: 11
    commit: f7bcf9e778792e301710096543382b6f26f7c1c9
    subdir: android/app/
    sudo:
      - sysctl fs.inotify.max_user_watches=524288 || true
      - echo "deb https://deb.debian.org/debian forky main" > /etc/apt/sources.list.d/forky.list
      - apt-get update
      - apt-get install -y -t forky npm
    init:
      - cd ../..
      - npm cache clean --force
      - npm ci
    gradle:
      - yes
    prebuild: sed -i '/implementation "com\.google\.android\.gms:play-services-location/d'
      ../../node_modules/@maplibre/maplibre-react-native/android/build.gradle
    scanignore:
      - node_modules/@react-native-async-storage/async-storage/android/build.gradle
      - node_modules/@react-native-community/geolocation/android/build.gradle
      - node_modules/react-native-safe-area-context/android/build.gradle
      - node_modules/react-native-screens/android/build.gradle
      - node_modules/react-native-sqlite-2/android/build.gradle
      - node_modules/react-native-vector-icons/android/build.gradle
      - node_modules/react-native/sdks/hermesc/linux64-bin/hermesc
    scandelete:
      - node_modules
    ndk: 27.1.12297006

AllowedAPKSigningKeys: 98bc88e2914a33a2953aee267e0850b4e877f7b8f8cc5af086b19d8783acb2ad

AutoUpdateMode: Version
UpdateCheckMode: Tags
CurrentVersion: '1.1'
CurrentVersionCode: 11
